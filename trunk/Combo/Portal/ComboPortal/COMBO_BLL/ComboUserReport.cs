
// Generated by MyGeneration Version # (1.3.0.3)

using System;
using COMBO_DAL;

namespace COMBO_BLL
{
	public class ComboUserReport : _ComboUserReport
	{
		public ComboUserReport()
		{
		
		}

        public bool getGeneralUserReports()
        {
            return LoadFromRawSql(@"SELECT CU.ComboUserID UserID, CU.UserName UserName, COUNT(CUR.ComboUserReportID) ReportsCount
                                    FROM ComboUser CU JOIN ComboUserReport CUR ON CUR.ComboUserID = CU.ComboUserID
                                    GROUP BY UserName, CU.ComboUserID, CUR.ReportDate
                                    ORDER BY CUR.ReportDate DESC");
        }

        public bool getReportsByUserID(int UserID)
        {
            string query = string.Format(@"SELECT CU.UserName UserName , CUR.ReportDate ReportDate , CUR.ReportText ReportText
                                            FROM ComboUser CU JOIN ComboUserReport CUR ON CUR.ComboUserID = CU.ComboUserID
                                            WHERE CUR.ComboReportedUserID = {0}", UserID);
            return LoadFromRawSql(query);
        }
	}
}
