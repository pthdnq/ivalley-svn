
// Generated by MyGeneration Version # (1.3.0.3)

using System;
using System.Collections.Generic;
using Flight_DAL;
namespace Flight_BLL
{
	public class UsersProfiles : _UsersProfiles
	{
		public UsersProfiles()
		{
		
		}

        public virtual bool getUserByGUID(Guid UserID)
        {
            this.Where.UserID.Value = new Guid(UserID.ToString());
            return this.Query.Load();
        }
        public virtual bool getuserEmails(List<string> GroupIDs)
        {
            string joined = string.Join(",", GroupIDs);
            string query = string.Format("SELECT P.* from UsersProfiles p inner join usergroup g on p.userid = g.userid WHERE g.GroupID IN ({0})", joined);
            return LoadFromRawSql(query);
        }

        public virtual bool getNamesList(string queryName)
        {
            string query = string.Format(@"SELECT u.* 
                                    from UsersProfiles u inner join aspnet_Users mem  on u.UserID = mem.UserId
                                    WHERE  ((mem.UserName LIKE N'%{0}%') OR (u.FullName LIKE N'%{0}%') OR (u.Email LIKE N'%{0}%'))", queryName);
            return LoadFromRawSql(query);
        }


        public virtual bool SearchByText(string Username)
        {
            string query = string.Format(@"SELECT U.*, mem.Username, mem.lastactivitydate, m.IsLockedOut
                                    from UsersProfiles u inner join aspnet_Users mem  on u.UserID = mem.UserId
                                     inner join aspnet_membership m on mem.userid =m.userid
                                    WHERE  ((mem.UserName LIKE N'%{0}%') OR (u.FullName LIKE N'%{0}%') OR (u.Email LIKE N'%{0}%'))", Username);
            return LoadFromRawSql(query);
        }
	}
}
