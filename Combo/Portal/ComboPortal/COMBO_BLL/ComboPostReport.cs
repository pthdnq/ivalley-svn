
// Generated by MyGeneration Version # (1.3.0.3)

using System;
using COMBO_DAL;

namespace COMBO_BLL
{
	public class ComboPostReport : _ComboPostReport
	{
		public ComboPostReport()
		{
		
		}

        public bool getGeneralPostReports()
        {
            return LoadFromRawSql(@"SELECT CP.PostText PostText, CP.ComboPostID PostID, COUNT(CPR.ComboPostReportID) ReportsCount
                                    FROM ComboUser CU JOIN ComboPost CP ON CP.ComboUserID = CU.ComboUserID JOIN ComboPostReport CPR ON CPR.ComboPostID = CP.ComboPostID
                                    GROUP BY CP.PostText,CP.ComboPostID, CPR.ReportDate
                                    ORDER BY CPR.ReportDate DESC");
        }

        public bool getPostReportsByPostID(int PostID)
        {
            string query = string.Format(@"SELECT CU.UserName UserName , CPR.ReportDate , CPR.ReportText
                                            FROM ComboUser CU JOIN ComboPostReport CPR ON CPR.ComboUserID = CU.ComboUserID
                                            WHERE CPR.ComboPostID = {0}", PostID);
            return LoadFromRawSql(query);
        }

	}
}
